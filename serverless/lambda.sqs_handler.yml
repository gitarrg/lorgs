
name: sqs_handler

runtime: python3.9
memorySize: 128 # optional, in MB, default is 1024
timeout: 120 # optional, in seconds, default is 6

handler: lorrgs_sqs_handler.handler.handler

layers:
  - Ref: PythonRequirementsLambdaLayer

package:
  individually: true
  patterns:
    - "lorrgs_sqs_handler/**"
    - "lorgs/**"

events:
  - sqs:
      arn: !GetAtt [MainSqsQueue, Arn]
      functionResponseType: ReportBatchItemFailures

  # TODO: fix this
  # - sqs:
  # arn: !GetAtt [LorrgsMainQueue, "Arn"]
  # batchSize: 1


environment:
  DISCORD_WEBHOOK_URL: ${env:DISCORD_WEBHOOK_URL}
