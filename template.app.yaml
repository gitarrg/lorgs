# Config for Google App Engine


# >>> gcloud app deploy --project lorrgs -q
# >>> gcloud app deploy --project lorrgs -q --no-promote

service: default
runtime: python39

default_expiration: "1h"  # static files cache


entrypoint: >
  gunicorn
  -b :$PORT
  --timeout=600
  --workers 1
  "lorgs.app:create_app()"
# longer timeout for the api calls that load data


env_variables:

  # Lorgs Config
  BUILD_TAG: {BUILD_TAG}
  SECRET_KEY: {SECRET_KEY}

  # Third Party Credentials
  WCL_CLIENT_ID: {WARCRAFTLOGS_CLIENT_ID}
  WCL_CLIENT_SECRET: {WCL_SECRET}

  # Database Credentials
  MONGO_URI: {MONGO_URI}
  REDIS_URL: {REDIS_URL}


handlers:

  - url: /static
    static_dir: lorgs/static

  - url: /.*
    script: auto
